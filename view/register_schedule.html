{{ define "register_schedule"}}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template">
  <meta name="author" content="GeeksLabs">
  <meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal">
  <link rel="shortcut icon" href="static/img/favicon.png">

  <title>Form Validation | Creative - Bootstrap 3 Responsive Admin Template</title>

  <!-- Bootstrap CSS -->
  <link href="static/css/bootstrap.min.css" rel="stylesheet">
  <!-- bootstrap theme -->
  <link href="static/css/bootstrap-theme.css" rel="stylesheet">
  <!--external css-->
  <!-- font icon -->
  <link href="static/css/elegant-icons-style.css" rel="stylesheet" />
  <link href="static/css/font-awesome.min.css" rel="stylesheet" />
  <!-- Custom styles -->
  <link href="static/css/style.css" rel="stylesheet">
  <link href="static/css/style-responsive.css" rel="stylesheet" />

  <!-- time picker -->
  <link href="static/css/jquery.datetimepicker.css" rel="stylesheet" />

  <!-- color picker -->
  <link href="static/css/bootstrap-colorpicker.css" rel="stylesheet" />


  <!-- full calendar css-->
  <link href="static/assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css" rel="stylesheet" />
  <link href="static/assets/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" />
  
  <!-- Custom full calendar styles -->
  <link rel="stylesheet" href="static/css/fullcalendar.css">


  <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
  <!--[if lt IE 9]>
      <script src="static/js/html5shiv.js"></script>
      <script src="static/js/respond.min.js"></script>
      <script src="static/js/lte-ie7.js"></script>
    <![endif]-->

    <!-- =======================================================
      Theme Name: NiceAdmin
      Theme URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
      Author: BootstrapMade
      Author URL: https://bootstrapmade.com
    ======================================================= -->
</head>

<body>
  <!-- container section start -->
  <section id="container" class="">

    <!--header start-->
    {{ template "header" .}}
    <!--header end-->

    <!--sidebar start-->
    {{ template "sidebar" .}}
    <!--sidebar end-->

    <!--main content start-->
    <section id="main-content">
      <section class="wrapper">
        <div class="row">
          <div class="col-lg-12">
            <h3 class="page-header"><i class="fa fa-files-o"></i> Register Schedule</h3>
            <ol class="breadcrumb">
              <li><i class="fa fa-home"></i><a href="index.html">Home</a></li>
              <li><i class="icon_document_alt"></i>Forms</li>
              <li><i class="fa fa-files-o"></i>Register Schedule</li>
            </ol>
          </div>
        </div>
        <!-- Form validations -->
        <!--tab nav start-->
        <div class="row　tab_content">

            <div class="col-lg-12">
              <section class="panel">
              <!-- タブ部 -->
              <header class="panel-heading tab-bg-primary ">
                <ul class="nav nav-tabs">
                  <li id="li-calendarTab" class="active">
                    <a data-toggle="tab" href="#calendarTab">カレンダー</a>
                  </li>
                  <li id="li-newScheduleTab" class="">
                    <a data-toggle="tab" href="#newSchedule">新規スケジュール登録</a>
                  </li>
                </ul>
              </header>

              <!-- 内容部 -->
              <div class="panel-body">
                <div class="tab-content">

                  <!-- カレンダータブ st-->
                  <div id="calendarTab" class="tab-pane active">
                    <div class="panel panel-default">
                      <div>
                        <header class="panel-heading">
                            Calendar
                        </header>
          
                        </div><br><br><br>
                        <div class="panel-body">
                        <!-- Widget content -->
          
                        <!-- Below line produces calendar. I am using FullCalendar plugin. -->
                        <div id="calendar2"></div>
                      </div>
                    </div>
                  </div>
                  <!-- カレンダータブ ed-->

                  <!-- 登録フォームタブ st-->
                  <div id="newSchedule" class="tab-pane">
                    <section class="panel">
                      <header class="panel-heading">
                        Register Schedule
                        {{ if .EditMode }}
                        <span class="label label-success">編集</span>
                        {{ else }}
                        <span class="label label-warning">新規</span>
                        {{ end }}
                      </header>
                      <div class="panel-body">
                        <div class="form">
                            <form class="form-validate form-horizontal " id="register_form" method="POST" action="/editSchedule" autocomplete="off">
        
                            <!--タイトル-->
                            <div class="form-group ">
                              <label for="fullname" class="control-label col-lg-2">Title <span class="required">*</span></label>
                              <div class="col-lg-10">
                                <input class=" form-control" id="title" name="title" type="text" value="{{ .EditSchedule.Title }}" />
                              </div>
                            </div>
        
                            <!-- <div class="form-group ">
                              <label for="address" class="control-label col-lg-2">Address <span class="required">*</span></label>
                              <div class="col-lg-10">
                                <input class=" form-control" id="address" name="address" type="text" />
                              </div>
                            </div>
                            <div class="form-group ">
                              <label for="username" class="control-label col-lg-2">Username <span class="required">*</span></label>
                              <div class="col-lg-10">
                                <input class="form-control " id="username" name="username" type="text" />
                              </div>
                            </div> -->
        
                            <!--datetime picker FROM-->
                            <div class="form-group">
                                <label class="control-label col-lg-2"> StartDatetime<span class="required">*</span></label>
                                <div class="col-lg-10">
                                    <!-- <input id="datetimepicker" type="text" value="" size="16" class="form-control"> -->
                                    <input id="date_timepicker_start" type="text" class="form-control" name="startdate" value="{{ .EditSchedule.Start_view }}">
                                </div>
                            </div>
        
                            <!--datetime picker TO-->
                            <div class="form-group">
                                <label class="control-label col-lg-2">EndDatetime<span class="required">*</span></label>
                                <div class="col-lg-10">
                                    <!-- <input id="datetimepicker" type="text" value="" size="16" class="form-control"> -->
                                    <input id="date_timepicker_end" type="text" class="form-control" name="enddate" value="{{ .EditSchedule.End_view }}">
                                </div>
                            </div>
        
                            <!-- <div class="form-group ">
                              <label for="email" class="control-label col-lg-2">Email <span class="required">*</span></label>
                              <div class="col-lg-10">
                                <input class="form-control " id="email" name="email" type="email" />
                              </div>
                            </div> -->
        
                            <!-- 概要 -->
                            <div class="form-group ">
                                <label for="ccomment" class="control-label col-lg-2">Description</label>
                                <div class="col-lg-10">
                                    <textarea class="form-control " id="ccomment" name="comment"  required>{{ .EditSchedule.Description }}</textarea>
                                </div>
                            </div>

                            <!--color picker start-->
                            <div class="form-group">
                              <label class="control-label col-lg-2">Color</label>

                              <div class="col-sm-3">
                                <input id="selected-color" name="color" type="text" class="cp1 form-control" value="#3366CC">
                              </div>
                            </div>
        
                            <!-- 公開権限 -->
                            <div class="form-group ">
                              <label for="agree" class="control-label col-lg-2 col-sm-3">Publishable <span class="required">*</span></label>
                              <div class="col-lg-10 col-sm-9">
                                    {{ if .EditSchedule.Publishable }}
                                    <input type="checkbox" style="width: 20px" class="checkbox form-control" id="publishable" name="publishable" checked/>
                                    {{ else }}
                                    <input type="checkbox" style="width: 20px" class="checkbox form-control" id="publishable" name="publishable" />
                                    {{ end }}
                                </div>
                            </div>
        
                            <!-- hidden項目およびボタン -->
                            <div class="form-group">
                              <div class="col-lg-offset-2 col-lg-10">
                                <input type="hidden" name="scheduleId" id="scheduleId" value="{{ .EditSchedule.ID }}">                        
                                <button class="btn btn-primary" type="submit" name="action" value="add">Save</button>
                                <button class="btn btn-default" type="button">Cancel</button>
                              </div>
                            </div>
        
                          </form>
                        </div>
                      </div>
                    </section>
                  </div>
                  <!-- 登録フォームタブ ed-->
                </div>
              </div>
            </section>
          </div>
        </div>


      <!-- mordal -->
      <div id="calendarModal" class="modal fade">
        <div class="modal-dialog modal-dialog-center">
          <div class="row">
          <div class="col-lg-10">
            <section class="panel">
              <header class="panel-heading">
                Register Schedule
                <span class="label label-success">編集</span>
              </header>
              <div class="panel-body">
                <div class="form">
                    <form class="form-validate form-horizontal " id="register_form" method="POST" action="/editSchedule" autocomplete="off">

                    <!--タイトル-->
                    <div class="form-group ">
                      <label for="fullname" class="control-label col-lg-2">Title <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input class=" form-control" id="mordal-title" name="title" type="text" value=""/>
                      </div>
                    </div>

                    <!-- <div class="form-group ">
                      <label for="address" class="control-label col-lg-2">Address <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input class=" form-control" id="address" name="address" type="text" />
                      </div>
                    </div>
                    <div class="form-group ">
                      <label for="username" class="control-label col-lg-2">Username <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input class="form-control " id="username" name="username" type="text" />
                      </div>
                    </div> -->

                    <!--datetime picker FROM-->
                    <div class="form-group">
                        <label class="control-label col-lg-2"> StartDatetime<span class="required">*</span></label>
                        <div class="col-lg-10">
                            <!-- <input id="datetimepicker" type="text" value="" size="16" class="form-control"> -->
                            <input id="mordal-startdate" type="text" class="form-control" name="startdate" value="">
                        </div>
                    </div>

                    <!--datetime picker TO-->
                    <div class="form-group">
                        <label class="control-label col-lg-2">EndDatetime<span class="required">*</span></label>
                        <div class="col-lg-10">
                            <!-- <input id="datetimepicker" type="text" value="" size="16" class="form-control"> -->
                            <input id="mordal-enddate" type="text" class="form-control" name="enddate" value="">
                        </div>
                    </div>

                    <!-- <div class="form-group ">
                      <label for="email" class="control-label col-lg-2">Email <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input class="form-control " id="email" name="email" type="email" />
                      </div>
                    </div> -->

                    <!-- 概要 -->
                    <div class="form-group ">
                        <label for="ccomment" class="control-label col-lg-2">Description</label>
                        <div class="col-lg-10">
                            <textarea class="form-control " id="mordal-description" name="comment"  required></textarea>
                        </div>
                    </div>

                    <!--color picker start-->
                    <div class="form-group">
                      <label class="control-label col-lg-2">Color</label>

                      <div class="col-sm-3">
                        <input id="mordal-color" name="color" type="text" class="cp1 form-control">
                      </div>
                    </div>
                    

                    <!-- 公開権限 -->
                    <div class="form-group ">
                      <label for="agree" class="control-label col-lg-2 col-sm-3">Publishable <span class="required">*</span></label>
                      <div class="col-lg-10 col-sm-9">
                          <input type="checkbox" style="width: 20px" class="checkbox form-control" id="mordal-publishable" name="publishable" />
                      </div>
                    </div>

                    <!-- hidden項目およびボタン -->
                    <div class="form-group">
                      <div class="col-lg-offset-2 col-lg-10">
                        <!-- <input type="hidden" name="mordal-scheduleId" id="mordal-scheduleId" value="">                         -->
                        <input type="hidden" name="scheduleId" id="mordal-scheduleId" value="">                        
                        <button class="btn btn-primary" type="submit" name="action" value="add">Save</button>
                        <button class="btn btn-danger" type="submit" name="action" value="delete">delete</button>
                        <!-- <button class="btn btn-default" type="button">Cancel</button> -->
                        <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                      </div>
                    </div>

                  </form>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>

          <div class="row">
          </div>
  
            <!-- mordal -->
            <div id="calendarModal" class="modal fade">
              <div class="modal-dialog modal-dialog-center">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                      <span aria-hidden="true">×</span>
                      <span class="sr-only">close</span>
                    </button>
                    <span id="modalTitle" class="modal-title"></span>
                  </div>
                  <div id="modalBody" class="modal-body">
                    <table class="table table-striped table-advance table-hover">
                      <tbody>
                      <tr>
                        <th><i class="icon_profile"></i> Title</th>
                        <td id="td-modal-title"></td>
                      </tr>
                      <tr>
                        <th><i class="icon_calendar"></i> StartDate</th>
                        <td id="td-modal-startdate"></td>
                      </tr>
                      <tr>
                        <th><i class="icon_calendar"></i> EndDate</th>
                        <td id="td-modal-enddate"></td>
                      </tr>
                      <tr>
                        <th><i class="icon_pin_alt"></i> Description</th>
                        <td id="td-modal-description"></td>
                      </tr>
                      </tbody>
                  </table>
                </div>
                  <div id="modalFooter" class="modal-footer">
                  <!-- <div class="modal-footer"> -->
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button id="btn-modal-edit" class="btn btn-success" type="button">edit</button>
                  <!-- </div> -->
                </div>
                </div>
              </div>
            </div>  


        <!-- スケジュール一覧 -->
        <div class="row">
        <div class="col-lg-12">
            <section class="panel">
            <header class="panel-heading">
                Advanced Table
            </header>
            <form id="form-schedulelist" action="/editSchedule" method="POST">
              <input type="hidden" name="action" value="delete" >
              <table class="table table-striped table-advance table-hover">
                <tbody>

                <tr>
                    <th><i class="icon_profile"></i> Title</th>
                    <th><i class="icon_calendar"></i> StartDate</th>
                    <th><i class="icon_mail_alt"></i> EndDate</th>
                    <th><i class="icon_pin_alt"></i> Publishable</th>
                    <th><i class="icon_cogs"></i> Action</th>
                </tr>

                {{ if eq (len .ScheduleList) 0 }}
                <tr>
                  <td colspan="5" style="text-align: center;">Sorry no rows here *except above....</td>
                </tr>
                {{ else }}

                  <!-- The contents of dot (.) are assigned to $ after invocation of range, so you can use $ to access users -->
                  {{range .ScheduleList}}
                  <tr>
                    <td><b>{{ .Title }}</b></td>
                    <td>{{ .Start_view }}</td>
                    <td>{{ .End_view }}</td>
                    <td>
                    {{ if .Publishable }}
                        <span class="label label-danger">公開</span>
                    {{ else }}
                        <span class="label label-info">非公開</span>
                    {{ end }}
                    </td>
                      <td>
                        <!-- <div class="btn-group"> -->
                          <!-- 削除ボタン -->
                          <!-- <button type="submit" id="btn-delete" class="btn btn-danger icon_close_alt2" name="scheduleId" value="{{ .ID }}"></button>
                        </div> -->

                        <!-- modal -->
                        <div class="btn-group">
                        <!-- thisはクリックの対象である要素 thisをonclickイベントでモーダルにIDをセット -->
                        <a class="btn btn-danger" data-toggle="modal" href="#myModal2" name="show-modal-btn" data-value="{{ .ID }}" onclick="setModal(this)">
                          <i class="icon_close_alt2"></i>
                        </a> 
                        </div>
                      </td>
                    </tr>
                    {{ end }}
                {{ end }}
                <tr>
                  <td>Mario Norris</td>
                  <td>2010-02-08</td>
                  <td>mildred@hour.info</td>
                  <td>Amarillo</td>
                  <td>
                    <div class="btn-group">
                      <a class="btn btn-primary" href="#"><i class="icon_plus_alt2"></i></a>
                      <a class="btn btn-success" href="#"><i class="icon_check_alt2"></i></a>
                      <a class="btn btn-danger" href="#"><i class="icon_close_alt2"></i></a>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </section>
        </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <form class="form-horizontal" id="" method="post" action="/editSchedule">
                <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title">Modal Tittle</h4>
                </div>
                <div class="modal-body">

                  削除してもよろしいですか？

                </div>
                <div class="modal-footer">
                  <input type="hidden" name="mordal-scheduleId" id="mordal-scheduleId" value="">                        
                  <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                  <button id="delete-confirm-yes" class="btn btn-warning" type="button"> delete</button>
                </div>
              </div>
              </form>
            </div>
          </div>
          <!-- modal -->

          <!-- page end-->
      </section>
    </section>
    <!--main content end-->

      {{ template "credits" .}}
      
  </section>
  <!-- container section end -->

  <!-- javascripts -->
  <script src="static/js/jquery.js"></script>
  <script src="static/js/bootstrap.min.js"></script>
  <!-- nice scroll -->
  <script src="static/js/jquery.scrollTo.min.js"></script>
  <script src="static/js/jquery.nicescroll2.js" type="text/javascript"></script>
  <!-- jquery validate js -->
  <!-- <script type="text/javascript" src="static/js/jquery.validate.min.js"></script> -->

  <!-- custom form validation script for this page-->
  <!-- <script src="static/js/form-validation-script.js"></script> -->
  <!--custome script for all page-->
  <script src="static/js/scripts.js"></script>

  <!-- time picker -->
  <script src="static/js/jquery.datetimepicker.full.js"></script>

  <!-- color picker -->
  <script src="static/js/bootstrap-colorpicker.js"></script>

  <!-- custom form component script for this page-->
  <script src="static/js/register-schedule.js"></script>

  <!-- jQuery full calendar -->
  <<script src="static/js/fullcalendar.min.js"></script>
  <!-- Full Google Calendar - Calendar -->
  <script src="static/assets/fullcalendar/fullcalendar/fullcalendar.js"></script>
  <!--script for this page only-->
  <script src="static/js/calendar-custom3.js"></script>

  <script>

  // function applyStyle() {
  //   var params = getParameter();
  //     if(params['id'] != null && params['id'] != ""){
  //       //aaaaa
  //       $('#li-calendarTab').removeClass('active');
  //       $('#calendarTab').removeClass('active');
  //       $('#li-newScheduleTab').removeClass('active');
  //       $('#newScheduleTab').removeClass('active');
  //       $('#li-newScheduleTab').addClass('active');
  //       $('#newScheduleTab').addClass('active');
  //     }else{
  //       $('#li-calendarTab').removeClass('active');
  //       $('#calendarTab').removeClass('active');
  //       $('#li-newScheduleTab').removeClass('active');
  //       $('#newScheduleTab').removeClass('active');
  //       $('#li-calendarTab').addClass('active');
  //       $('#calendarTab').addClass('active');
  //     }
  // };


  $('#mordal-color').change(function() {
    var colorpicker = null;
    colorpicker =  $('#mordal-color');

    var color = null
    color = colorpicker.val();

    $('#mordal-color').css('color',color);  // モーダルのスケジュールIDをセット
    console.log( $(this).val() );

  });


  $('#selected-color').change(function() {
    var colorpicker = null;
    colorpicker =  $('#selected-color');

    var color = null
    color = colorpicker.val();

    $('#selected-color').css('color',color);  // モーダルのスケジュールIDをセット
    console.log( $(this).val() );

  });
  
  //パラメータを設定したURLを返す
  function setParameter( paramsArray ) {
        var resurl = location.href.replace(/\?.*$/,"");
        for ( key in paramsArray ) {
            resurl += (resurl.indexOf('?') == -1) ? '?':'&';
            resurl += key + '=' + paramsArray[key];
        }
        return resurl;
    }
  
    //パラメータを取得する
    function getParameter(){
    var paramsArray = [];
    var url = location.href; 
    parameters = url.split("#");
    if( parameters.length > 1 ) {
        url = parameters[0];
    }
    parameters = url.split("?");
    if( parameters.length > 1 ) {
        var params   = parameters[1].split("&");
        for ( i = 0; i < params.length; i++ ) {
           var paramItem = params[i].split("=");
           paramsArray[paramItem[0]] = paramItem[1];
        }
    }
    return paramsArray;
    };


    // === javascriptのみでフォーム送信を行うなら以下 ===

    $('#btn-delete').on('click', function (e) {
      window.confirm();
    });

    $('#delete-confirm-yes').on('click', function (e) {
      postForm();
    });

    // javaScriptにてフォームを作成してモーダルにて削除をする
    function postForm(){

      //フォームを生成form-schedulelist
      var form = document.getElementById("form-schedulelist");
      var form = document.createElement("form");
      form.name = "fsend"; //省略可 
      form.action = "/editSchedule";
      form.method = "POST"; //GETも可能
      form.style.visibility = "hidden"; //画面に表示しない 
      document.body.appendChild(form); //画面内に追加
      

      //送信内容の作成
      var request1 = document.createElement('input');//アクション
      var request2 = document.createElement('input');//スケジュールID

      request1.type = 'hidden'; //入力フォームが表示されないように
      request1.name = 'action';
      request1.value = 'delete';

      request2.type = 'hidden'; //入力フォームが表示されないように
      request2.name = 'scheduleId';
      request2.value = document.getElementById("mordal-scheduleId").value;

    
      form.appendChild(request1);
      form.appendChild(request2);

      document.body.appendChild(form);
  
      form.submit();
      // document.getElementById("btn-delete").click();
    }

    function setModal(button){
      var modalId = document.getElementById("mordal-scheduleId");
      // aタグにはvalue属性はない為、
      // ユーザーが任意に拡張するときはdata-*形式を利用
      console.log("data-value >>>>>> " + button.getAttribute("data-value"));
      modalId.value = button.getAttribute("data-value");
    }
  
  </script>




</body>

</html>
{{ end }}